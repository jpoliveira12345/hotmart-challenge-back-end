<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.1.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">
    <changeSet author="jpveira (generated)" id="1619520502789-1">
        <createTable tableName="marketplace_category">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-2">
        <createTable tableName="marketplace_product">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created_at" type="date"/>
            <column name="description" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="score" type="DECIMAL(19, 2)"/>
            <column name="id_category" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-3">
        <createTable tableName="marketplace_purchaser">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-4">
        <createTable tableName="marketplace_sale">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="score" type="INT"/>
            <column name="id_product" type="BIGINT"/>
            <column name="id_purchaser" type="BIGINT"/>
            <column name="id_seller" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-5">
        <createTable tableName="marketplace_seller">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-6">
        <createTable tableName="product_audit">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="rev" type="INT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="revtype" type="TINYINT(3)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="created_at" type="date"/>
            <column name="description" type="VARCHAR(255)"/>
            <column name="score" type="DECIMAL(19, 2)"/>
            <column name="id_category" type="BIGINT"/>
            <column name="id_product" type="BIGINT"/>
            <column name="id_purchaser" type="BIGINT"/>
            <column name="id_seller" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-7">
        <createTable tableName="revinfo">
            <column autoIncrement="true" name="rev" type="INT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="revtstmp" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-8">
        <createIndex indexName="FK4tbqxvexjy6g6pybwhmok5jty" tableName="product_audit">
            <column name="rev"/>
        </createIndex>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-9">
        <createIndex indexName="FK816h44qmvq8r1bslw7tkktos3" tableName="marketplace_sale">
            <column name="id_seller"/>
        </createIndex>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-10">
        <createIndex indexName="FKlnsqjup0s8w2c947j4i3ten7r" tableName="marketplace_sale">
            <column name="id_purchaser"/>
        </createIndex>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-11">
        <createIndex indexName="FKmm452hs0leioevkbgsbo6281o" tableName="marketplace_product">
            <column name="id_category"/>
        </createIndex>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-12">
        <createIndex indexName="FKn98kbxwdducsst0xucmlvws4m" tableName="marketplace_sale">
            <column name="id_product"/>
        </createIndex>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-13">
        <addForeignKeyConstraint baseColumnNames="rev" baseTableName="product_audit" constraintName="FK4tbqxvexjy6g6pybwhmok5jty" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="rev" referencedTableName="revinfo" validate="true"/>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-14">
        <addForeignKeyConstraint baseColumnNames="id_seller" baseTableName="marketplace_sale" constraintName="FK816h44qmvq8r1bslw7tkktos3" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="marketplace_seller" validate="true"/>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-15">
        <addForeignKeyConstraint baseColumnNames="id_purchaser" baseTableName="marketplace_sale" constraintName="FKlnsqjup0s8w2c947j4i3ten7r" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="marketplace_purchaser" validate="true"/>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-16">
        <addForeignKeyConstraint baseColumnNames="id_category" baseTableName="marketplace_product" constraintName="FKmm452hs0leioevkbgsbo6281o" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="marketplace_category" validate="true"/>
    </changeSet>
    <changeSet author="jpveira (generated)" id="1619520502789-17">
        <addForeignKeyConstraint baseColumnNames="id_product" baseTableName="marketplace_sale" constraintName="FKn98kbxwdducsst0xucmlvws4m" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="id" referencedTableName="marketplace_product" validate="true"/>
    </changeSet>
</databaseChangeLog>
